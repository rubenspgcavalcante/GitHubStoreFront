{"version":3,"sources":["app/shop/stores/shop.store.ts"],"names":[],"mappings":";;;;;;;IASA;QAAwB,6BAAY;QAMhC;YACI,iBAAO,CAAC;YANJ,iBAAY,GAAG,QAAQ,CAAC;YAExB,YAAO,GAAU,EAAE,CAAC;YACpB,WAAM,GAAU,wCAAwC,CAAC;QAIjE,CAAC;QAED,uBAAG,GAAH,UAAI,QAAe;YACf,IAAM,IAAI,GAAG,IAAI,CAAC;YAClB,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,MAAM,GAAG,QAAQ,EAAsB;gBAC/C,OAAO,EAAE,UAAU,MAAM;oBACrB,IAAI,CAAC,OAAO,CAAC,MAAM,CAAC,EAAE,CAAC,QAAQ,EAAE,CAAC,GAAG,MAAM,CAAC;oBAC5C,IAAI,CAAC,UAAU,EAAE,CAAC;gBACtB,CAAC;aACJ,CAAC,CAAC;QACP,CAAC;QAED,0BAAM,GAAN,UAAO,MAAc;YACjB,OAAO,IAAI,CAAC,OAAO,CAAC,MAAM,CAAC,EAAE,CAAC,QAAQ,EAAE,CAAC,CAAC;YAC1C,IAAI,CAAC,UAAU,EAAE,CAAC;QACtB,CAAC;QAED,8BAAU,GAAV;YACI,IAAI,KAAK,GAAG,EAAE,CAAC;YACf,GAAG,CAAC,CAAC,IAAI,CAAC,IAAI,IAAI,CAAC,OAAO,CAAC,CAAC,CAAC;gBACzB,EAAE,CAAC,CAAC,IAAI,CAAC,OAAO,CAAC,cAAc,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;oBACjC,KAAK,CAAC,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,CAAC;gBAChC,CAAC;YACL,CAAC;YACD,MAAM,CAAC,KAAK,CAAC;QACjB,CAAC;;QAED,8BAAU,GAAV;YACI,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,YAAY,CAAC,CAAC;QACjC,CAAC;QAED,4BAAQ,GAAR,UAAS,QAAiB;YACtB,IAAI,CAAC,EAAE,CAAC,IAAI,CAAC,YAAY,EAAE,QAAQ,CAAC,CAAC;QACzC,CAAC;QAED,wCAAoB,GAApB,UAAqB,QAAiB;YAClC,IAAI,CAAC,cAAc,CAAC,IAAI,CAAC,YAAY,EAAE,QAAQ,CAAC,CAAC;QACrD,CAAC;QACL,gBAAC;IAAD,CA9CA,AA8CC,CA9CuB,YAAY,GA8CnC;IAED,IAAI,SAAS,GAAG,IAAI,SAAS,EAAE,CAAC;IAChC;yBAAe,SAAS,CAAC;IAEzB,2BAAa,CAAC,QAAQ,CAAC,UAAU,MAA6B;QAE1D,MAAM,CAAC,CAAC,MAAM,CAAC,UAAU,CAAC,CAAC,CAAC;YACxB,KAAK,2BAAa,CAAC,QAAQ;gBACvB,SAAS,CAAC,GAAG,CAAC,MAAM,CAAC,UAAU,CAAC,CAAC,CAAC;gBAClC,KAAK,CAAC;YAEV,KAAK,2BAAa,CAAC,WAAW;gBAC1B,SAAS,CAAC,MAAM,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAC,CAAC;gBACnC,KAAK,CAAC;QACd,CAAC;IAEL,CAAC,CAAC,CAAC","file":"app/shop/stores/shop.store.js","sourcesContent":["import $ = require(\"jquery\");\nimport EventEmitter = require(\"EventEmitter\");\n\nimport ShopConstants from \"../constants/shop.constants\";\nimport AppDispatcher from \"../../commons/dispatcher/app-dispatcher\"\n\nimport IGHUser = shop.IGHUser;\nimport IAction = Flux.IAction;\n\nclass ShopStore extends EventEmitter {\n    private CHANGE_EVENT = 'change';\n\n    private ghUsers:Object = {};\n    private apiUrl:String = '//githubshop.herokuapp.com/api/ghuser/';\n\n    constructor() {\n        super();\n    }\n\n    add(username:string) {\n        const that = this;\n        $.ajax(this.apiUrl + username, <JQueryAjaxSettings>{\n            success: function (ghUser) {\n                that.ghUsers[ghUser.id.toString()] = ghUser;\n                that.emitChange();\n            }\n        });\n    }\n\n    remove(ghUser:IGHUser) {\n        delete this.ghUsers[ghUser.id.toString()];\n        this.emitChange();\n    }\n\n    getGHUsers():IGHUser[] {\n        var users = [];\n        for (var i in this.ghUsers) {\n            if (this.ghUsers.hasOwnProperty(i)) {\n                users.push(this.ghUsers[i]);\n            }\n        }\n        return users;\n    };\n\n    emitChange() {\n        this.emit(this.CHANGE_EVENT);\n    }\n\n    onChange(callback:Function) {\n        this.on(this.CHANGE_EVENT, callback);\n    }\n\n    removeChangeListener(callback:Function) {\n        this.removeListener(this.CHANGE_EVENT, callback);\n    }\n}\n\nvar shopStore = new ShopStore();\nexport default shopStore;\n\nAppDispatcher.register(function (action:IAction<ShopConstants>) {\n\n    switch (action.actionType) {\n        case ShopConstants.USER_ADD:\n            shopStore.add(action['username']);\n            break;\n\n        case ShopConstants.USER_REMOVE:\n            shopStore.remove(action['ghUser']);\n            break;\n    }\n\n});"],"sourceRoot":"/source/"}